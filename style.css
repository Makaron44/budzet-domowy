/* ========= ZMIENNE ========= */
:root{
  --bg-gradient: linear-gradient(120deg,#89f7fe,#66a6ff);
  --container-bg: rgba(255,255,255,.7);
  --text: #1b3b5f;
  --heading: #27496d;

  --field-bg: #fff;
  --field-border: #b5c6d6;

  --btn-grad: linear-gradient(135deg,#61c6f8 0%,#1976d2 100%);
  --btn-grad-hover: linear-gradient(135deg,#1976d2 0%,#61c6f8 100%);

  --pos: #19994c;
  --neg: #e53935;

  --toast: #1f7a1f;
  --toast-warn: #c04a1b;
}

body.dark{
  --bg-gradient: linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  --container-bg: rgba(20,20,20,.72);
  --text: #e2e8f0;
  --heading: #f1f5f9;

  --field-bg: #2b3442;
  --field-border: #4b5563;

  --btn-grad: linear-gradient(135deg,#3b82f6 0%,#1e40af 100%);
  --btn-grad-hover: linear-gradient(135deg,#1e40af 0%,#3b82f6 100%);

  --pos: #4ade80;
  --neg: #f87171;

  --toast: #166534;
  --toast-warn: #9a3412;
}

/* ========= GLOBAL ========= */
html{-webkit-text-size-adjust:100%}
body{
  font-family: 'Segoe UI', Arial, sans-serif;
  background: var(--bg-gradient);
  background-size:300% 300%;
  animation:bgMove 18s ease infinite;
  min-height:100vh; margin:0; color:var(--text);
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ========= KONTENER ========= */
.container{
  background:var(--container-bg);
  backdrop-filter: blur(10px);
  max-width:430px; margin:32px auto; padding:28px 18px 30px;
  border-radius:18px;
  box-shadow:0 7px 32px rgba(0,0,0,.18);
  display:flex; flex-direction:column; gap:15px;
}

/* ========= NAGŁÓWKI ========= */
h1{
  text-align:center; color:var(--text);
  font-size:2em; margin-bottom:10px; letter-spacing:1px;
}
h2{
  text-align:center; color:var(--heading);
  font-size:1.1em; margin:14px 0 6px; font-weight:600;
}

/* ========= BANER DATY / POGODY ========= */
#date-banner, .daytime-banner{
  text-align:center;
  font-size:1.05rem; font-weight:700; color:#fff;
  background:linear-gradient(135deg,#4caf50 0%,#087f23 100%);
  padding:10px 14px; border-radius:10px;
  box-shadow:0 3px 14px rgba(0,0,0,.15); margin-top:-6px;
}
body.dark #date-banner, body.dark .daytime-banner{
  box-shadow:0 3px 14px rgba(0,0,0,.35);
}
/* pogoda */
#date-banner .weather-wrap, .daytime-banner .weather-wrap{
  display:inline-flex; align-items:center; gap:6px;
}
#date-banner .weather-icon, .daytime-banner .weather-icon{
  width:32px; height:32px; vertical-align:middle;
  filter:drop-shadow(0 1px 1px rgba(0,0,0,.2));
}
#date-banner .weather-sep, .daytime-banner .weather-sep{opacity:.85;margin:0 6px}

/* ========= FORMULARZE ========= */
form{
  display:flex; flex-wrap:wrap; gap:10px; justify-content:center; align-items:center;
  background:rgba(255,255,255,.6);
  padding:14px; border-radius:12px; box-shadow:0 2px 7px rgba(0,0,0,.06);
}
input[type="text"],input[type="number"],input[type="datetime-local"],select{
  flex:1 1 130px; padding:12px; font-size:1.07em; border-radius:7px;
  border:1px solid var(--field-border); background:var(--field-bg); color:var(--text);
  outline:none; transition:border .15s, box-shadow .15s;
}
input:focus, select:focus{
  border:1.5px solid #70b6f9;
  box-shadow:0 0 0 3px rgba(112,182,249,.15);
}

/* iOS datetime – niech trzyma rozmiar */
input[type="datetime-local"]{-webkit-appearance:none;appearance:none}
input[type="datetime-local"]::-webkit-datetime-edit{padding:0}

/* ========= PRZYCISKI ========= */
.btn-row{display:flex; gap:10px; width:100%; justify-content:space-between; flex-wrap:wrap}
.btn-row button{flex:1 1 48%}

#budget-form button,#export-csv-btn,#export-pdf-btn,#reminder-form button,#theme-toggle{
  height:50px; font-size:1.1em; padding:0 14px; border-radius:8px;
  display:flex; align-items:center; justify-content:center; gap:8px;
  cursor:pointer; color:#fff; border:none;
  background:var(--btn-grad); box-shadow:0 2px 10px rgba(0,0,0,.12);
  transition:background .18s, transform .12s;
}
#budget-form button:hover,#export-csv-btn:hover,#export-pdf-btn:hover,#reminder-form button:hover,#theme-toggle:hover{
  background:var(--btn-grad-hover); transform:translateY(-2px) scale(1.04);
}

/* ========= HISTORIA ========= */
#history{
  background:rgba(255,255,255,.6); padding:12px; border-radius:10px; min-height:60px;
  box-shadow:0 1px 6px rgba(0,0,0,.07); list-style:none; margin-top:7px;
}
#history li{
  display:flex; justify-content:space-between; align-items:center;
  gap:10px; margin-bottom:7px; font-size:1.04em;
  border-bottom:1px solid rgba(226,234,244,.8);
  padding:7px 3px 5px; transition:transform .25s ease, opacity .25s ease;
}
#history li:last-child{margin-bottom:0;border-bottom:none}
#history li.added{animation:popIn .25s ease-out both}
#history li.removing{opacity:0; transform:translateX(20px) scale(.98)}
@keyframes popIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:none}}

#history li strong{color:#1976d2;font-weight:600}
#history li > div{display:flex; align-items:center; gap:6px}

#history li button{
  flex:none; width:28px; height:28px; padding:0;
  background:linear-gradient(135deg,#fd4b57 0%,#fd8963 100%);
  border:none; border-radius:50%; color:#fff; cursor:pointer;
  transition:transform .13s, filter .16s;
}
#history li button:hover{transform:scale(1.1); filter:brightness(1.05)}

.amount.positive{color:var(--pos); font-weight:600}
.amount.negative{color:var(--neg); font-weight:600}

/* kropki kategorii */
.cat-dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;vertical-align:middle;flex:0 0 auto;box-shadow:0 0 0 2px rgba(0,0,0,.06) inset}
.cat-przychod{background:#2ecc71}
.cat-jedzenie{background:#27ae60}
.cat-rachunki{background:#f39c12}
.cat-rozrywka{background:#9b59b6}
.cat-transport{background:#3498db}
.cat-inne{background:#95a5a6}
.cat-apteka{background:#16a085}
.cat-odziez{background:#e67e22}
.cat-rata{background:#e74c3c}

/* ========= SUMA ========= */
#total{
  font-weight:700; font-size:2em; text-align:center;
  background:rgba(241,253,243,.9);
  border-radius:8px; padding:8px 0; box-shadow:0 1px 7px rgba(0,0,0,.06); margin-top:6px;
}
/* ładny kafelek – jeśli dodasz klasę total-card do h2 z sumą */
h2.total-card{
  background:rgba(255,255,255,.7);
  padding:12px 14px; border-radius:12px; box-shadow:0 6px 20px rgba(0,0,0,.08); margin-top:6px;
}
h2.total-card #total{display:inline-block;padding:6px 10px;border-radius:10px;letter-spacing:.3px;transition:filter .2s}

h2.total-card #total.total-pos{color:#1b5e20;background:rgba(76,175,80,.15);box-shadow:inset 0 0 0 1px rgba(76,175,80,.25)}
h2.total-card #total.total-neg{color:#b71c1c;background:rgba(244,67,54,.15);box-shadow:inset 0 0 0 1px rgba(244,67,54,.25)}

body.dark h2.total-card{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.08)}
body.dark h2.total-card #total.total-pos{color:#8ef5a3;background:rgba(46,204,113,.16);box-shadow:0 0 10px rgba(46,204,113,.15), inset 0 0 0 1px rgba(46,204,113,.28)}
body.dark h2.total-card #total.total-neg{color:#ff8a80;background:rgba(231,76,60,.16);box-shadow:0 0 10px rgba(231,76,60,.15), inset 0 0 0 1px rgba(231,76,60,.28)}

/* ========= PRZYPOMNIENIA ========= */
#reminder-form{display:grid; grid-template-columns:1fr; gap:10px}
#reminder-form .rem-label{width:100%; font-size:.9em; color:#444; margin-top:4px; margin-bottom:-4px; font-weight:500}
#reminder-form input[type="text"],#reminder-form input[type="datetime-local"],#reminder-form select,#reminder-form button{
  height:44px; line-height:44px; font-size:16px; padding:0 10px; border-radius:7px; box-sizing:border-box
}
#reminder-form *{min-width:0}

@media (min-width:560px) and (max-width:879px){
  #reminder-form{grid-template-columns:1fr 1fr; align-items:center}
  #reminder-form #reminder-text{grid-column:1/2}
  #reminder-form .rem-label{grid-column:2/3}
  #reminder-form #reminder-date{grid-column:2/3}
  #reminder-form #reminder-repeat{grid-column:1/2}
  #reminder-form button[type="submit"]{grid-column:2/3; white-space:nowrap}
}
@media (min-width:880px){
  #reminder-form{grid-template-columns:1.2fr 1fr .9fr auto; align-items:center}
  #reminder-form #reminder-text{grid-column:1/2}
  #reminder-form .rem-label{grid-column:2/3}
  #reminder-form #reminder-date{grid-column:2/3}
  #reminder-form #reminder-repeat{grid-column:3/4}
  #reminder-form button[type="submit"]{grid-column:4/5; white-space:nowrap}
}

#reminder-list{list-style:none; padding:0; margin-top:10px; background:rgba(255,255,255,.5); border-radius:10px}
#reminder-list li{padding:8px; border-bottom:1px solid rgba(0,0,0,.1); display:flex; justify-content:space-between; align-items:center}
.rem-info{display:flex; flex-direction:column}
.rem-meta{font-size:.9em; color:#567}
.rem-badge{display:inline-block; padding:2px 8px; border-radius:10px; font-size:.78em; background:#e8f2ff; color:#1b66c9; margin-left:6px}
.rem-actions{display:flex; gap:8px}
.rem-actions button{padding:6px 10px; border:none; border-radius:7px; cursor:pointer; color:#fff}
.rem-actions .btn-paid{background:#19994c}
.rem-actions button:not(.btn-paid){background:#e74c3c}

/* ========= TOAST ========= */
#toast{position:sticky; top:8px; z-index:50; display:none}
.toast-msg{
  background:var(--toast); color:#fff; padding:10px 14px; border-radius:10px;
  box-shadow:0 6px 20px rgba(0,0,0,.12); display:flex; justify-content:space-between; align-items:center; gap:10px;
  animation:toastDrop .25s ease-out;
}
.toast-msg.warn{background:var(--toast-warn)}
.toast-close{background:rgba(255,255,255,.2); border:none; color:#fff; border-radius:6px; padding:6px 8px; cursor:pointer}
@keyframes toastDrop{from{opacity:0; transform:translateY(-8px)} to{opacity:1; transform:none}}

/* ========= FILTRY ========= */
.filters{
  display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:10px; align-items:center;
  background:rgba(255,255,255,.6); padding:10px; border-radius:10px; box-shadow:0 2px 7px rgba(0,0,0,.06); margin-bottom:6px;
}
.filters>*{min-width:0}
#filter-reset{background:linear-gradient(135deg,#9aa7b1 0%,#6b7b88 100%); color:#fff; border:none; border-radius:8px; height:44px; padding:0 12px; font-size:1em; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
#filter-reset:hover{transform:translateY(-2px) scale(1.03)}
@media (max-width:900px){ .filters{grid-template-columns:repeat(auto-fit,minmax(180px,1fr))} }
@media (orientation:landscape) and (max-width:740px){ .filters{grid-template-columns:1fr 1fr} #filter-reset{grid-column:1/-1; width:100%; justify-self:stretch} }
@media (max-width:480px){ .filters{grid-template-columns:1fr} }

/* ========= „WYKRESY” CSS ========= */
#chart-categories,#chart-months{display:flex; flex-direction:column; gap:8px}
.chart-row{display:grid; grid-template-columns:120px 1fr auto; gap:10px; align-items:center; --row-delay:0ms}
.chart-label{font-size:.95em; opacity:.9}
.chart-bar{height:12px; background:rgba(0,0,0,.08); border-radius:6px; overflow:hidden}
.chart-bar.thin{height:8px}
.chart-fill{height:100%; width:0; transform-origin:left; transform:scaleX(0); transition:transform 1.6s ease; transition-delay:var(--row-delay)}
.chart-fill.animate{transform:scaleX(1)}
.chart-fill.expense{background:linear-gradient(90deg,#ff7a7a,#ff4d4d)}
.chart-fill.income{background:linear-gradient(90deg,#4ade80,#22c55e)}
.chart-fill.saldo.pos{background:linear-gradient(90deg,#60a5fa,#2563eb)}
.chart-fill.saldo.neg{background:linear-gradient(90deg,#fca5a5,#ef4444)}
.chart-values{display:flex; gap:10px; font-size:.9em; white-space:nowrap}
.chart-empty{opacity:.7; font-style:italic; text-align:center; padding:6px 0}
@media (max-width:480px){ .chart-row{grid-template-columns:90px 1fr auto} }

/* animacja etykiet/wartości gdy kontener ma .in-view (ustawia JS) */
.anim-label,.anim-value{opacity:0; transform:translateY(6px) scale(.98); will-change:opacity,transform}
.in-view .anim-label,.in-view .anim-value{opacity:1; transform:none}

/* ========= MOBILE DROBIAZGI ========= */
@media (max-width:600px){
  input,select,button{-webkit-appearance:none;appearance:none}
  body{font-size:16px}
  h1{font-size:1.4em; margin-bottom:6px}
  h2{font-size:1em; margin:10px 0 6px}
  .container{margin-top:12px; padding:10px 12px}
  form{padding:8px; gap:8px}
  input[type="text"],input[type="number"],select{font-size:16px; height:40px; padding:0 10px; border-radius:10px}
  .btn-row{flex-direction:column}
  .btn-row button{height:42px; font-size:16px}
  #history li{font-size:.95em; padding:6px 4px}
  #total{font-size:1.3em; padding:6px 0}
}

/* ========= DODATKI ========= */
/* delikatne wejście nagłówka */
@keyframes floatIn{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}
h1.title-anim{animation:floatIn .20s cubic-bezier(.22,.61,.36,1) both}
